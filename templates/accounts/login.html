{% extends 'base.html' %}
{% block meta %}<meta name="robots" content="index,follow">{% endblock %}
{% block title %}Sign In - NyumbaFinder KE{% endblock %}
{% load crispy_forms_tags %}

{% block content %}
{% include 'partials/messages.html' %}
<div class="flex items-center justify-center min-h-screen">
   <div class="bg-[var(--bg-light)] rounded-2xl border border-[var(--border)] p-10 w-full max-w-md shadow-2xl">
        <h2 class="text-4xl font-bold text-center text-[var(--primary)] mb-3">NyumbaFinder KE</h2>
        <h3 class="text-[var(--text-muted)] text-2xl text-center mb-3">Welcome Back</h3>

        <form method="post" class="space-y-6">
            {% csrf_token %}
            <label class="block text-gray-300 font-semibold text-lg mb-2">
                        {{ form.username.label }}
            </label>
            {{ form.username }}
            {% if form.username.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.username.errors|join:", " }}</p>
            {% endif %}

            <label class="block text-gray-300 font-semibold text-lg mb-2">
                        {{ form.password.label }}
            </label>
            {{ form.password }}
            {% if form.password.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.password.errors|join:", " }}</p>
            {% endif %}

            <button type="submit" class="w-full btn-primary py-4 text-lg bg-[var(--primary)] text-[var(--text)] font-bold">
                Sign In
            </button>
        </form>

        <p class="text-gray-600 text-center mt-6">
            No account?
            <a href="{% url 'register' %}" class="text-[var(--primary)] font-bold hover:underline">Register Free</a>
        </p>
        <div class="text-center mt-3 mb-3">
            <a href="{% url 'password_reset' %}" class="text-[var(--primary)] hover:text-[var(--primary-light)] transition text-sm font-medium">
                Forgot your password?
            </a>
        </div>

        <p class="text-sm text-center mt-4 text-gray-500">Secure • Verified • Scam-Free</p>
   </div>
</div>

{% include 'partials/messages_js.html' %}

<script>
    // Auto-dismiss messages after 5 seconds
    document.addEventListener('DOMContentLoaded', function() {
        setTimeout(() => {
            const messages = document.querySelectorAll('.alert-message');
            messages.forEach(message => {
                message.style.transition = 'opacity 0.5s ease';
                message.style.opacity = '0';
                setTimeout(() => message.remove(), 500);
            });
        }, 5000);
    });
</script>
{% endblock %}